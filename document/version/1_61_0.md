#Boost 1.61.0リリースノート

本家リリースノート：

- <https://github.com/boostorg/website/blob/master/feed/history/boost_1_61_0.qbk>
- <http://www.boost.org/users/history/version_1_61_0.html>


リポジトリは以下：

- <https://github.com/boostorg/>


リポジトリからのビルド方法は、egtraさんのブログを参照：

- 「[Modularized Boost（GitHubへ移行したリポジトリ）を使用する](http://dev.activebasic.com/egtra/2013/12/03/620/)」


##新ライブラリ

- [Compute](http://www.boost.org/doc/libs/release/libs/compute)
    - 並列及びGPU計算のためのライブラリ

- [DLL](http://www.boost.org/doc/libs/release/libs/dll)
    - DLLとDSOを容易に扱うためのライブラリ

- [Hana](http://www.boost.org/doc/libs/release/libs/hana)
    - C++14以降必須
    - 近代的なC++のメタプログラミングライブラリ
    - 高水準での異種型シーケンスへのアルゴリズムを提供する
        - 自然な構文での型レベルでの計算や、ユーザー定義型への操作可能にする

- [Metaparse](http://www.boost.org/doc/libs/release/libs/metaparse)
    - C++11以降必須
    - コンパイル時構文解析器をコンパイル時に構築するためのライブラリ
        - Spirit似ているが、Spiritがコンパイル時にパーサを構築し実行時にパースするのに対し、Metaparseはコンパイル時に構築、パースを実施する


##更新ライブラリ

- [Container](#container)
- [Context](#context)
- [Coroutine](#coroutine)
- [Coroutine2](#coroutine2)
- [Fusion](#fusion)
- [Intrusive](#intrusive)
- [Interprocess](#interprocess)
- [Log](#log)
- [Move](#move)
- [Optional](#optional)


## <a name="container" href="#container">Container</a>
- `small_vector`に、以下のコンストラクタを追加：
    - `small_vector(size_type n, default_init_t)`
    - `small_vector(size_type n, default_init_t, const allocator_type &a)`
    - `small_vector(size_type n, const value_type &v)`
    - `small_vector(size_type n, const value_type &v, const allocator_type &a)`
    - `template <class InIt> small_vector(InIt first, InIt last)`
    - `template <class InIt> small_vector(InIt first, InIt last, const allocator_type& a)`
- `small_vector`に、基本クラスのオブジェクトを受け取るコンストラクタと代入演算子を追加。これによって異なる初期要素数のテンプレートパラメータを持つ`small_vector`同士で変換ができるようになる：
    - `explicit small_vector(const small_vector_base &other)`
    - `explicit small_vector(small_vector_base&& other)`
    - `small_vector& operator=(const small_vector_base &other)`
    - `small_vector& operator=(small_vector_base&& other)`
- バグ修正
    - [Trac #11820](https://svn.boost.org/trac/boost/ticket/11820) `map::operator[ ]`を使用した際のコンパイルエラーを修正
    - [Trac #11856](https://svn.boost.org/trac/boost/ticket/11856) typedef名がクラス名と衝突していたために、`pool_resource`でのコンストラクタ呼び出しがコンパイルエラーになっていた問題を修正
    - [Trac #11866](https://svn.boost.org/trac/boost/ticket/11866) `small_vector`が範囲をとるコンストラクタを持っていなかったので追加
    - [Trac #11867](https://svn.boost.org/trac/boost/ticket/11867) 異なる初期要素数のテンプレートパラメータを持つ`small_vector`同士で変換ができなかったため、変換コンストラクタを追加
    - [Trac #11912](https://svn.boost.org/trac/boost/ticket/11912) `vector`のexpand_backwardsで、同じソースをムーブする可能性があったので修正
    - [Trac #11957](https://svn.boost.org/trac/boost/ticket/11957) `static_vector::max_size()`がキャパシティより大きかった問題を修正
    - [Trac #12014](https://svn.boost.org/trac/boost/ticket/12014) `set::insert()`で、`const_iterator`の範囲を挿入しようとすると、オーバーロード解決があいまいでコンパイルエラーとなる問題を修正
    - [GitHub #33](https://github.com/boostorg/container/pull/33) `throw_exception()`で`std::string`を使用できるよう、インクルードを追加。標準の`<stdexcept>`をインクルードするだけでは、`std::string`は前方宣言しかされない場合があるため。


## <a name="context" href="#context">Context</a>
- [#11246](https://svn.boost.org/trac/boost/ticket/11246) 未定義のシンボルがあったためMinGWでビルドできなかったのを修正
- [#11365](https://svn.boost.org/trac/boost/ticket/11365) VS2015RCにおいて、execution\_context.hppでエラーが発生していたのを修正
- [#11652](https://svn.boost.org/trac/boost/ticket/11652) `__cpp_lib_integer_sequence`を確認するようにした
- fcontext\_t: 公開APIではなくなった
- execution\_context: 仕様要求レベルをC++14からC++11に引き下げ
- execution\_context: 新しい実装を追加した
    - 型安全にデータを転送可能
    - スタックの先頭で関数が実行される
    - パフォーマンスを改善
    - 静的メンバの`current()`は削除された
    - 訳者注: これまでの実装(version 1)と新しい実装(version 2)はクラス名が同一だが互換は無い


## <a name="coroutine" href="#coroutine">Coroutine</a>
- 浮動小数点数レジスタに関するアトリビュートを削除
    - 訳者注: Boost.Contextで浮動小数点数レジスタの保存を制御できなくなったことにより、浮動小数点数レジスタは常に保存されなくなった


## <a name="coroutine2" href="#coroutine2">Coroutine2</a>
- 浮動小数点数レジスタに関するアトリビュートを削除
    - 訳者注: Boost.Contextで浮動小数点数レジスタの保存を制御できなくなったことにより、浮動小数点数レジスタは常に保存されなくなった
- パフォーマンスを改善
- 仕様要求レベルをC++14からC++11に引き下げ


## <a name="fusion" href="#fusion">Fusion</a>
- `BOOST_PP_IS_EMPTY`を使用したことによる、MSVC8での大量の警告を低減 [#11157](https://svn.boost.org/trac/boost/ticket/11157)
- コンテナの変換コンストラクタとSFINAEでコンパイルエラーが発生する場合があったのを修正 [#11766](https://svn.boost.org/trac/boost/ticket/11766)
- C++11版の`fusion::vector`から末尾`fusion::void_`の特別扱いを削除した [pull request 120](https://github.com/boostorg/fusion/pull/120)


## <a name="intrusive" href="#intrusive">Intrusive</a>
**バグ修正**

- [Boost Trac #11832](https://svn.boost.org/trac/boost/ticket/11832) clang-clでコンパイルエラーとなっていたのを修正
- [Boost Trac #11865](https://svn.boost.org/trac/boost/ticket/11865) Clang 3.6 (C++11/C++14)において、`intrusive::list`の明示的コンストラクタがエラーとなっていたのを修正
- [Boost Trac #11992](https://svn.boost.org/trac/boost/ticket/11992) `key_type`を取る`insert_check`のオーバーロードを追加
- [GitHub Pull #19](https://github.com/boostorg/intrusive/pull/19) ebo\_functor\_holder: コピーコンストラクタのコンパイルエラーを修正


## <a name="interprocess" href="#interprocess">Interprocess</a>
**バグ修正**

- [GitHub Pull #23](https://github.com/boostorg/interprocess/pull/23) MinGWのヘッダーインクルードでの、大文字・小文字を修正


## <a name="log" href="#log">Log</a>
- 一般的な変更
    - `boost::basic_string_ref`のサポートと特殊化は廃止予定となった
        - ユーザは`boost::basic_string_view`へと移行することが推奨される
        - なお`boost::basic_string_ref`のサポートは将来的に削除される予定である
    - ターゲットディレクトリ内に保存されるログファイル数に上限を設定できるようになった. Erich Keaneのパッチによる ([8746](https://svn.boost.org/trac/boost/ticket/8746))
- バグ修正
    - Windows CEでのいくつものコンパイルに関する問題を修正
    - Solarisでのコンパイルに関する問題を修正
    - MSVC-10がいくつかの場合でフォーマッタに関して正しくないコードを生成していたので回避策を追加 ([#12025](https://svn.boost.org/trac/boost/ticket/12025))
- 詳細は[changelog](http://www.boost.org/doc/libs/release/libs/log/doc/html/log/changelog.html)を参照のこと


## <a name="move" href="#move">Move</a>
- *実験的*: バッファを必要としない、漸近的に最適なマージとソートのアルゴリズム(`adaptive_merge` と `adaptive_sort`)を実装
- 修正したバグ
    - [Trac #11758](https://svn.boost.org/trac/boost/ticket/11758) 右辺値参照が有効な環境において、`BOOST_MOVABLE_BUT_NOT_COPYABLE`がアクセス修飾子をprivateにリセットしていなかったのを修正


## <a name="optional" href="#optional">Optional</a>
- `boost::optional`を参照パラメータで特殊化した。それにあたって、いくつかの問題を修正した：
    - 参照`optional`に対する`sizeof`がポインタのものとなるようにした
    - 参照`optional`をコピーして接続した際の、いくつかのバグを修正した
    - いくつかのコンパイラで、正しくない参照の束縛によって発生していた全ての実行時バグが、コンパイルエラーとして検出できるようにした
    - 参照`optional`を`swap`できるようにした。これはポインタの浅いswapであり、元となるオブジェクトには影響がない
    - 参照`optional`が抽象型に対して動作するようにした
- 入れ子型のドキュメントを記載した([Trac #5193](https://svn.boost.org/trac/boost/ticket/5193))
- 完全転送のコンストラクタをSFINAEフレンドリーになるよう修正した([Trac #12002](https://svn.boost.org/trac/boost/ticket/12002))。ただし、これはC++11の`<type_traits>`を正しく実装した新しめのプラットフォームでのみ機能する
- [Trac #10445](https://svn.boost.org/trac/boost/ticket/10445) 右辺値を`optional<const T&>`に代入するとコンパイルエラーになる問題を修正


##テスト済みコンパイラ
主要なテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - Intel:
    - QCC:
- OS X:
    - Apple Clang:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

追加して含まれるテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - GCC, C++11:
    - GCC, C++14:
    - Intel:
    - Intel, C++11:
- OS X:
    - Apple Clang:
    - Apple Clang, C++11:
    - Apple Clang, C++14:
    - Clang:
    - Clang, C++11:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

##翻訳
[Kohei Takahashi](https://github.com/Flast), [Akira Takahashi](https://github.com/faithandbrave)

