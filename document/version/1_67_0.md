# Boost 1.67.0リリースノート

本家リリースノート：

- <https://github.com/boostorg/website/blob/master/feed/history/boost_1_67_0.qbk>
- <http://www.boost.org/users/history/version_1_67_0.html>


リポジトリは以下：

- <https://github.com/boostorg/>


リポジトリからのビルド方法は、egtraさんのブログを参照：

- 「[Modularized Boost（GitHubへ移行したリポジトリ）を使用する](http://dev.activebasic.com/egtra/2013/12/03/620/)」


## 新ライブラリ

- [NewOne](#newone) # example


## 更新ライブラリ

- [Atomic](#atomic)
- [Multi-index](#multi-index)
- [Log](#log)
- [PolyCollection](#poly-collection)
- [Unordered](#unordered)
- [Uuid](#uuid)


## <a id="atomic" href="#atomic">Atomic</a>
- <span style="color:red;">**破壊的変更**</span> 1.66.0で追加された`(op)_and_test`操作の結果を反対にした。これらの関数は、演算結果がゼロでない場合に`true`を返す。これは標準ライブラリのほかの`test`関数と一貫した動作である。この関数を使用するたびに警告を出力する`BOOST_ATOMIC_DETAIL_HIGHLIGHT_OP_AND_TEST`オプションを用意した。これを定義することで、仕様変更前のこれらの関数を使用しているところを検出できる
- C++2a用の更新。`memory_order`がスコープ付きのenumになったことへの対応。`memory_order_acquire`の代わりに`memory_order::acquire`を使用できる。古い名前は互換性のために残る。参照 : [P0439R0](http：//www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0439r0.html)
- C++2a用の更新。浮動小数点数型のアトミック操作を実験的にサポート
    - `add` (加算)、`sub` (減算)、`negate` (符号反転)の、`fetch_`バージョンと`opaque_`バージョン (戻り値型が`void`) を追加した
    - ロックフリーのプロパティマクロとして、`BOOST_ATOMIC_FLOAT_LOCK_FREE`, `BOOST_ATOMIC_DOUBLE_LOCK_FREE`, `BOOST_ATOMIC_LONG_DOUBLE_LOCK_FREE`を追加した
    - `BOOST_ATOMIC_NO_FLOATING_POINT`を定義することで、浮動小数点数版を無効にできる
    - 参照 : [P0020R6](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0020r6.html)
- 新たな実験的な操作を追加
    - 符号反転する`negate_and_test`と、ビット反転する`complement_and_test`。結果がゼロでない場合に`true`を返す
    - `fetch_`と違って変更後の値が返る`add`, `sub`, `negate`, `bitwise_and`, `bitwise_or`, `bitwise_xor`, `bitwise_complement`操作を追加
- 型`T`のデフォルトコンストラクタがtrivial (自明) であれば、それを要素とする`atomic`型のデフォルトコンストラクタもそうなるようにした
- `atomic`型の内部実装として、符号付き整数型のオーバーフローに起因する未定義動作を回避するようにした。このライブラリの内部で2の補数表現を使用し、オーバーフロー規則に合致するようにした。現在、このライブラリは2の補数表現のネイティブ符号付き整数型を要求する (ただし、定義されたオーバーフローのセマンティクスはない。ライブラリ内部で未定義動作を引き起こさないだけ)
- Clangサポートを改善。とくに、DCASがロックフリーにならない問題を修正し、32ビットx86で不正なコードが生成される可能があった問題を修正した
- MinGWサポートを改善。GCC 4.6以上向けに、x86のDCASのコンパイルを修正
- x86 PIEコードで、asmブロックが`ebx`値を保存するようにした


## <a id="log" href="#log">Log</a>

- C++17 との互換性向上: アロケータを使うために、メンバに直にアクセスするのではなく、`allocator_traits` を使うようにした
- ABI の 名前空間の定義を更新することで、gcc 7 以降との互換性を向上させた
- "TextFile" sink の "Append" 設定パラメータをドキュメントに追加した。このパラメータは以前からサポートされていたが、ドキュメントの更新だけが抜けていた


## <a id="multi-index" href="#multi-index">Multi-index</a>

- [Ticket 13307](https://svn.boost.org/trac10/ticket/13307) `operator&` をオーバーロードしていた要素を完全に受け入れられるようになった。この修正を行うために、Boost.Operators を更新してくれた Daniel Frey に感謝する
- C++17 で非推奨になった `std::allocator` の使用をやめた
- メンテナンス上の修正

## <a id="poly-collection" href="#poly-collection">PolyCollection</a>
- メンテナンス上の修正


## <a id="unordered" href="#unordered">Unordered</a>
- [GitHub #7](https://github.com/boostorg/unordered/pull/7) C++17で非推奨になった`std::iterator`の使用をやめた


## <a id="uuid" href="#uuid">Uuid</a>
- [GitHub #53](https://github.com/boostorg/uuid/pull/53) OSが提供するエントロピーを直接使用するために、`random_generator`を最適化
- UUIDのバルク生成のために、`random_generator_mt19937`を追加
- エントロピーの取得エラーを、無視するのでなく処理するようにした
- [GitHub #24](https://github.com/boostorg/uuid/issues/24) Windows UWPをサポート
- CloudABIをサポート


## テスト済みコンパイラ
主要なテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - Intel:
    - QCC:
- OS X:
    - Apple Clang:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

追加して含まれるテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - GCC, C++11:
    - GCC, C++14:
    - Intel:
    - Intel, C++11:
- OS X:
    - Apple Clang:
    - Apple Clang, C++11:
    - Apple Clang, C++14:
    - Clang:
    - Clang, C++11:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

## 翻訳
[Akira Takahashi](https://github.com/faithandbrave), [Yoshinari Takaoka](https://github.com/mumumu)

